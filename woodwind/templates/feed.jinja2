{% extends "base.jinja2" %}
{% block head %}
  <script src="{{url_for('static', filename='feed.js', version='2015-02-19')}}"></script>
  <script src="{{ url_for('static', filename='websocket_client.js', version='2015-02-22') }}"></script>

  {% if current_user and current_user.settings
        and current_user.settings.get('reply-method') == 'indie-config' %}
    <script src="{{url_for('static', filename='indieconfig.js')}}"></script>
    <script src="{{url_for('static', filename='webaction.js')}}"></script>
  {% endif %}

{% endblock head %}

{% block header %}
  {% if current_user.is_authenticated() %}
    <form action="{{ url_for('.subscribe') }}" method="POST">
      <input type="url" id="origin" name="origin" placeholder="Subscribe to URL" />
    </form>
  {% endif %}
{% endblock header %}

{% block body %}

  {% for entry in entries %}
    {% include '_entry.jinja2' with context %}
  {% endfor %}

  {% if entries %}
    <div class="pager">
      <a id="older-link" href="{{ url_for_other_page(page=page+1) }}">Older</a>
    </div>
  {% endif %}

  {% if current_user %}
    <script>
      webSocketSubscribe('woodwind:user:' + {{ current_user.id }});
    </script>
  {% endif %}

{% endblock body %}
